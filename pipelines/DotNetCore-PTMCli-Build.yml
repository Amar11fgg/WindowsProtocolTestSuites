trigger: none

variables:
  - group: Build Variables

resources:
  repositories:
    - repository: template
      type: git
      name: WindowsProtocolTestSuites/WindowsProtocolTestSuites
      ref: AzurePipelines-main


pool:
  vmImage: windows-2022

jobs:
- job:
  displayName: DotNetCore Build
  workspace:
    clean: false
  timeoutInMinutes: 0
  steps:
  - checkout: self
  - task: UseDotNet@2
    displayName: Use .NET Core sdk 8.x
    inputs:
      version: '8.x'
  - task: NuGetAuthenticate@1
    inputs:
      feedUrl: 'https://microsoft.pkgs.visualstudio.com/WindowsProtocolTestSuites/_packaging/windowsprotocoltestsuites_PublicPackages/nuget/v3/index.json'
  - task: npmAuthenticate@0
    inputs:
      workingFile: 'WindowsProtocolTestSuites/ProtocolTestManager/PTMService/PTMService/ClientApp/.npmrc'
  - template: pipelines/build/DotNetCore-PTMCli-Build-steps.yml@template